<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ndarray: ndarray/ArrayBase.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>ndarray/ArrayBase.hpp</h1><a href="ArrayBase_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef NDARRAY_ArrayBase_hpp_INCLUDED</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define NDARRAY_ArrayBase_hpp_INCLUDED</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;boost/iterator/counting_iterator.hpp&gt;</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="preprocessor">#include &quot;<a class="code" href="ExpressionBase_8hpp.html" title="Definitions for ExpressionBase.">ndarray/ExpressionBase.hpp</a>&quot;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &quot;<a class="code" href="Vector_8hpp.html" title="Definition for Vector.">ndarray/Vector.hpp</a>&quot;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &quot;<a class="code" href="Core_8hpp.html" title="Definitions for Core.">ndarray/detail/Core.hpp</a>&quot;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &quot;<a class="code" href="NestedIterator_8hpp.html" title="Definition of NestedIterator.">ndarray/detail/NestedIterator.hpp</a>&quot;</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &quot;<a class="code" href="StridedIterator_8hpp.html" title="Definition of StridedIterator.">ndarray/detail/StridedIterator.hpp</a>&quot;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &quot;<a class="code" href="ArrayAccess_8hpp.html" title="Definitions for ArrayAccess.">ndarray/detail/ArrayAccess.hpp</a>&quot;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &quot;<a class="code" href="ViewBuilder_8hpp.html" title="Implementation of arbitrary views into arrays.">ndarray/detail/ViewBuilder.hpp</a>&quot;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;<a class="code" href="ArrayTraits_8hpp.html" title="Traits for Array.">ndarray/ArrayTraits.hpp</a>&quot;</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="keyword">namespace </span>ndarray {
<a name="l00023"></a>00023 
<a name="l00032"></a>00032 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Derived&gt;
<a name="l00033"></a><a class="code" href="classndarray_1_1ArrayBase.html">00033</a> <span class="keyword">class </span><a class="code" href="classndarray_1_1ArrayBase.html" title="CRTP implementation for Array and ArrayRef.">ArrayBase</a> : <span class="keyword">public</span> <a class="code" href="classndarray_1_1ExpressionBase.html" title="CRTP base class for all multidimensional expressions.">ExpressionBase</a>&lt;Derived&gt; {
<a name="l00034"></a>00034     <span class="keyword">typedef</span> <a class="code" href="structndarray_1_1ExpressionTraits.html" title="Traits for expressions.">ExpressionTraits&lt;Derived&gt;</a> <a class="code" href="structndarray_1_1ExpressionTraits.html" title="Traits for expressions.">Traits</a>;
<a name="l00035"></a>00035     <span class="keyword">typedef</span> <span class="keyword">typename</span> Traits::Core Core;
<a name="l00036"></a>00036     <span class="keyword">typedef</span> <span class="keyword">typename</span> Traits::CorePtr CorePtr;
<a name="l00037"></a>00037 <span class="keyword">public</span>:
<a name="l00039"></a><a class="code" href="classndarray_1_1ArrayBase.html#a88ae5e081c4f90245b0cd043bf25e88b">00039</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> Traits::Element <a class="code" href="classndarray_1_1ArrayBase.html#a88ae5e081c4f90245b0cd043bf25e88b" title="Data type of array elements.">Element</a>;
<a name="l00041"></a><a class="code" href="classndarray_1_1ArrayBase.html#a8bad27bccdad58f118327b25b6775288">00041</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> Traits::Iterator <a class="code" href="classndarray_1_1ArrayBase.html#a8bad27bccdad58f118327b25b6775288" title="Nested array or element iterator.">Iterator</a>;
<a name="l00043"></a><a class="code" href="classndarray_1_1ArrayBase.html#aa2c184ab5475e6dfe1fbcd37f795bb4f">00043</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> Traits::Reference <a class="code" href="classndarray_1_1ArrayBase.html#aa2c184ab5475e6dfe1fbcd37f795bb4f" title="Nested array or element reference.">Reference</a>;
<a name="l00045"></a><a class="code" href="classndarray_1_1ArrayBase.html#a8ce78d5712a644faee9dc77ebdd6a896">00045</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> Traits::Value <a class="code" href="classndarray_1_1ArrayBase.html#a8ce78d5712a644faee9dc77ebdd6a896" title="Nested array or element value type.">Value</a>;
<a name="l00047"></a><a class="code" href="classndarray_1_1ArrayBase.html#a76ce8574c4bebec5817f3b9ebcdbcc37">00047</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> Traits::ND <a class="code" href="classndarray_1_1ArrayBase.html#a76ce8574c4bebec5817f3b9ebcdbcc37" title="Number of dimensions (boost::mpl::int_).">ND</a>;
<a name="l00049"></a><a class="code" href="classndarray_1_1ArrayBase.html#af2e3e192d7cada11fbb255072a889d43">00049</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> Traits::RMC <a class="code" href="classndarray_1_1ArrayBase.html#af2e3e192d7cada11fbb255072a889d43" title="Number of guaranteed row-major contiguous dimensions, counted from the end (boost::mpl::int_)...">RMC</a>;
<a name="l00051"></a><a class="code" href="classndarray_1_1ArrayBase.html#a395b6e1a04a04ff199da1a563321835e">00051</a>     <span class="keyword">typedef</span> <a class="code" href="structndarray_1_1Vector.html" title="A fixed-size 1D array class.">Vector&lt;int,ND::value&gt;</a> <a class="code" href="structndarray_1_1Vector.html" title="A fixed-size 1D array class.">Index</a>;
<a name="l00053"></a><a class="code" href="classndarray_1_1ArrayBase.html#aad0835ae14640c499a0e321c22f90fbc">00053</a>     <span class="keyword">typedef</span> <a class="code" href="classndarray_1_1ArrayRef.html" title="A proxy class for Array with deep assignment operators.">ArrayRef&lt;Element,ND::value,(RMC::value &gt;</a> 1 || RMC::value &lt; 1) ? -RMC::value : RMC::value&gt; <a class="code" href="classndarray_1_1ArrayBase.html#aad0835ae14640c499a0e321c22f90fbc" title="ArrayRef to an reverse-ordered contiguous array; the result of a call to transpose()...">FullTranspose</a>;
<a name="l00055"></a><a class="code" href="classndarray_1_1ArrayBase.html#a508428ff9e64c6a337a51bb0cd95a911">00055</a>     <span class="keyword">typedef</span> <a class="code" href="classndarray_1_1ArrayRef.html" title="A proxy class for Array with deep assignment operators.">ArrayRef&lt;Element,ND::value,0&gt;</a> <a class="code" href="classndarray_1_1ArrayRef.html" title="A proxy class for Array with deep assignment operators.">Transpose</a>;
<a name="l00057"></a><a class="code" href="classndarray_1_1ArrayBase.html#a4e68dabb08ef979ee44b99e7ccaf3e4b">00057</a>     <span class="keyword">typedef</span> <a class="code" href="classndarray_1_1Array.html" title="A multidimensional strided array.">Array&lt;Element,ND::value,RMC::value&gt;</a> <a class="code" href="classndarray_1_1Array.html" title="A multidimensional strided array.">Shallow</a>;
<a name="l00059"></a><a class="code" href="classndarray_1_1ArrayBase.html#ab24c049ab9b985ce06cef463ef92b5d8">00059</a>     <span class="keyword">typedef</span> <a class="code" href="classndarray_1_1ArrayRef.html" title="A proxy class for Array with deep assignment operators.">ArrayRef&lt;Element,ND::value,RMC::value&gt;</a> <a class="code" href="classndarray_1_1ArrayRef.html" title="A proxy class for Array with deep assignment operators.">Deep</a>;
<a name="l00060"></a>00060 
<a name="l00062"></a><a class="code" href="classndarray_1_1ArrayBase.html#a2aced91b3046421bca85113c0e5cdcb8">00062</a>     <a class="code" href="classndarray_1_1ArrayBase.html#aa2c184ab5475e6dfe1fbcd37f795bb4f" title="Nested array or element reference.">Reference</a> <a class="code" href="classndarray_1_1ArrayBase.html#a2aced91b3046421bca85113c0e5cdcb8" title="Return a single subarray.">operator[]</a>(<span class="keywordtype">int</span> n)<span class="keyword"> const </span>{
<a name="l00063"></a>00063         <span class="keywordflow">return</span> Traits::makeReference(
<a name="l00064"></a>00064             this-&gt;_data + n * this-&gt;<span class="keyword">template</span> getStride&lt;0&gt;(),
<a name="l00065"></a>00065             this-&gt;_core
<a name="l00066"></a>00066         );
<a name="l00067"></a>00067     }
<a name="l00068"></a>00068 
<a name="l00070"></a><a class="code" href="classndarray_1_1ArrayBase.html#af92a50e2d69a574a5e1230f9bb8220c6">00070</a>     <a class="code" href="classndarray_1_1ArrayBase.html#a88ae5e081c4f90245b0cd043bf25e88b" title="Data type of array elements.">Element</a> &amp; <a class="code" href="classndarray_1_1ArrayBase.html#af92a50e2d69a574a5e1230f9bb8220c6" title="Return a single element from the array.">operator[]</a>(<a class="code" href="structndarray_1_1Vector.html" title="A fixed-size 1D array class.">Index</a> <span class="keyword">const</span> &amp; i)<span class="keyword"> const </span>{
<a name="l00071"></a>00071         <span class="keywordflow">return</span> *(this-&gt;_data + this-&gt;_core-&gt;template computeOffset(i));
<a name="l00072"></a>00072     }
<a name="l00073"></a>00073 
<a name="l00075"></a><a class="code" href="classndarray_1_1ArrayBase.html#aa823f532b832d765cbd7af314596d9c3">00075</a>     <a class="code" href="classndarray_1_1ArrayBase.html#a8bad27bccdad58f118327b25b6775288" title="Nested array or element iterator.">Iterator</a> <a class="code" href="classndarray_1_1ArrayBase.html#aa823f532b832d765cbd7af314596d9c3" title="Return an Iterator to the beginning of the array.">begin</a>()<span class="keyword"> const </span>{
<a name="l00076"></a>00076         <span class="keywordflow">return</span> Traits::makeIterator(
<a name="l00077"></a>00077             this-&gt;_data,
<a name="l00078"></a>00078             this-&gt;_core,
<a name="l00079"></a>00079             this-&gt;<span class="keyword">template</span> getStride&lt;0&gt;()
<a name="l00080"></a>00080         );
<a name="l00081"></a>00081     }
<a name="l00082"></a>00082 
<a name="l00084"></a><a class="code" href="classndarray_1_1ArrayBase.html#ab0709d4876f8f3c39bfa895be74417dd">00084</a>     <a class="code" href="classndarray_1_1ArrayBase.html#a8bad27bccdad58f118327b25b6775288" title="Nested array or element iterator.">Iterator</a> <a class="code" href="classndarray_1_1ArrayBase.html#ab0709d4876f8f3c39bfa895be74417dd" title="Return an Iterator to one past the end of the array.">end</a>()<span class="keyword"> const </span>{
<a name="l00085"></a>00085         <span class="keywordflow">return</span> Traits::makeIterator(
<a name="l00086"></a>00086             this-&gt;_data + this-&gt;<span class="keyword">template</span> getSize&lt;0&gt;() * this-&gt;<span class="keyword">template</span> getStride&lt;0&gt;(), 
<a name="l00087"></a>00087             this-&gt;_core,
<a name="l00088"></a>00088             this-&gt;<span class="keyword">template</span> getStride&lt;0&gt;()
<a name="l00089"></a>00089         );
<a name="l00090"></a>00090     }
<a name="l00091"></a>00091 
<a name="l00093"></a><a class="code" href="classndarray_1_1ArrayBase.html#a34aafeb459a41134090d144ce849e6c9">00093</a>     <a class="code" href="classndarray_1_1ArrayBase.html#a88ae5e081c4f90245b0cd043bf25e88b" title="Data type of array elements.">Element</a> * <a class="code" href="classndarray_1_1ArrayBase.html#a34aafeb459a41134090d144ce849e6c9" title="Return a raw pointer to the first element of the array.">getData</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> _data; }
<a name="l00094"></a>00094     
<a name="l00096"></a><a class="code" href="classndarray_1_1ArrayBase.html#a6a2355cfab8bc2a29cd11e64c87b5952">00096</a>     Manager::Ptr <a class="code" href="classndarray_1_1ArrayBase.html#a6a2355cfab8bc2a29cd11e64c87b5952" title="Return the opaque object responsible for memory management.">getManager</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> this-&gt;_core-&gt;getManager(); }
<a name="l00097"></a>00097 
<a name="l00099"></a><a class="code" href="classndarray_1_1ArrayBase.html#ad6c097ef2a1e4aedca7ecaa82c17a679">00099</a>     <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> P&gt; <span class="keywordtype">int</span> <a class="code" href="classndarray_1_1ArrayBase.html#ad6c097ef2a1e4aedca7ecaa82c17a679" title="Return the size of a specific dimension.">getSize</a>()<span class="keyword"> const </span>{
<a name="l00100"></a>00100         <span class="keywordflow">return</span> detail::getDimension&lt;P&gt;(*this-&gt;_core).<a class="code" href="classndarray_1_1ArrayBase.html#ad6c097ef2a1e4aedca7ecaa82c17a679" title="Return the size of a specific dimension.">getSize</a>();
<a name="l00101"></a>00101     }
<a name="l00102"></a>00102 
<a name="l00104"></a><a class="code" href="classndarray_1_1ArrayBase.html#a913c85f5428e216cf8195484838891b6">00104</a>     <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> P&gt; <span class="keywordtype">int</span> <a class="code" href="classndarray_1_1ArrayBase.html#a913c85f5428e216cf8195484838891b6" title="Return the stride in a specific dimension.">getStride</a>()<span class="keyword"> const </span>{
<a name="l00105"></a>00105         <span class="keywordflow">return</span> detail::getDimension&lt;P&gt;(*this-&gt;_core).<a class="code" href="classndarray_1_1ArrayBase.html#a913c85f5428e216cf8195484838891b6" title="Return the stride in a specific dimension.">getStride</a>();
<a name="l00106"></a>00106     }
<a name="l00107"></a>00107 
<a name="l00109"></a><a class="code" href="classndarray_1_1ArrayBase.html#a1ebe6f2a3d8c811be62741a3cd4e1685">00109</a>     <a class="code" href="structndarray_1_1Vector.html" title="A fixed-size 1D array class.">Index</a> <a class="code" href="classndarray_1_1ArrayBase.html#a1ebe6f2a3d8c811be62741a3cd4e1685" title="Return a Vector of the sizes of all dimensions.">getShape</a>()<span class="keyword"> const </span>{ <a class="code" href="structndarray_1_1Vector.html" title="A fixed-size 1D array class.">Index</a> r; this-&gt;_core-&gt;fillShape(r); <span class="keywordflow">return</span> r; }
<a name="l00110"></a>00110 
<a name="l00112"></a><a class="code" href="classndarray_1_1ArrayBase.html#a3872135e33b2369b8258b1ef585d2f7b">00112</a>     <a class="code" href="structndarray_1_1Vector.html" title="A fixed-size 1D array class.">Index</a> <a class="code" href="classndarray_1_1ArrayBase.html#a3872135e33b2369b8258b1ef585d2f7b" title="Return a Vector of the strides of all dimensions.">getStrides</a>()<span class="keyword"> const </span>{ <a class="code" href="structndarray_1_1Vector.html" title="A fixed-size 1D array class.">Index</a> r; this-&gt;_core-&gt;fillStrides(r); <span class="keywordflow">return</span> r; }
<a name="l00113"></a>00113 
<a name="l00115"></a><a class="code" href="classndarray_1_1ArrayBase.html#a3b1c0e410ec41e7471e113ab4ad74372">00115</a>     <span class="keywordtype">int</span> <a class="code" href="classndarray_1_1ArrayBase.html#a3b1c0e410ec41e7471e113ab4ad74372" title="Return the total number of elements in the array.">getNumElements</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> this-&gt;_core-&gt;getNumElements(); }
<a name="l00116"></a>00116 
<a name="l00118"></a><a class="code" href="classndarray_1_1ArrayBase.html#a8eb371bd057f55262748a6b926b15737">00118</a>     <a class="code" href="classndarray_1_1ArrayBase.html#aad0835ae14640c499a0e321c22f90fbc" title="ArrayRef to an reverse-ordered contiguous array; the result of a call to transpose()...">FullTranspose</a> <a class="code" href="classndarray_1_1ArrayBase.html#a8eb371bd057f55262748a6b926b15737" title="Return a view of the array with the order of the dimensions reversed.">transpose</a>()<span class="keyword"> const </span>{
<a name="l00119"></a>00119         <a class="code" href="structndarray_1_1Vector.html" title="A fixed-size 1D array class.">Index</a> shape = <a class="code" href="classndarray_1_1ArrayBase.html#a1ebe6f2a3d8c811be62741a3cd4e1685" title="Return a Vector of the sizes of all dimensions.">getShape</a>();
<a name="l00120"></a>00120         <a class="code" href="structndarray_1_1Vector.html" title="A fixed-size 1D array class.">Index</a> strides = <a class="code" href="classndarray_1_1ArrayBase.html#a3872135e33b2369b8258b1ef585d2f7b" title="Return a Vector of the strides of all dimensions.">getStrides</a>();
<a name="l00121"></a>00121         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n=0; n &lt; ND::value / 2; ++n) {
<a name="l00122"></a>00122             std::swap(shape[n], shape[ND::value-n-1]);
<a name="l00123"></a>00123             std::swap(strides[n], strides[ND::value-n-1]);
<a name="l00124"></a>00124         }
<a name="l00125"></a>00125         <span class="keywordflow">return</span> <a class="code" href="classndarray_1_1ArrayBase.html#aad0835ae14640c499a0e321c22f90fbc" title="ArrayRef to an reverse-ordered contiguous array; the result of a call to transpose()...">FullTranspose</a>(
<a name="l00126"></a>00126             <a class="code" href="classndarray_1_1ArrayBase.html#a34aafeb459a41134090d144ce849e6c9" title="Return a raw pointer to the first element of the array.">getData</a>(),
<a name="l00127"></a>00127             Core::create(shape, strides, <a class="code" href="classndarray_1_1ArrayBase.html#a6a2355cfab8bc2a29cd11e64c87b5952" title="Return the opaque object responsible for memory management.">getManager</a>())
<a name="l00128"></a>00128         );
<a name="l00129"></a>00129     }
<a name="l00130"></a>00130 
<a name="l00132"></a><a class="code" href="classndarray_1_1ArrayBase.html#ac229474ebd366c02caf6f4416006b2bb">00132</a>     <a class="code" href="classndarray_1_1ArrayRef.html" title="A proxy class for Array with deep assignment operators.">Transpose</a> <a class="code" href="classndarray_1_1ArrayBase.html#ac229474ebd366c02caf6f4416006b2bb" title="Return a view of the array with the dimensions permuted.">transpose</a>(<a class="code" href="structndarray_1_1Vector.html" title="A fixed-size 1D array class.">Index</a> <span class="keyword">const</span> &amp; order)<span class="keyword"> const </span>{
<a name="l00133"></a>00133         <a class="code" href="structndarray_1_1Vector.html" title="A fixed-size 1D array class.">Index</a> newShape;
<a name="l00134"></a>00134         <a class="code" href="structndarray_1_1Vector.html" title="A fixed-size 1D array class.">Index</a> newStrides;
<a name="l00135"></a>00135         <a class="code" href="structndarray_1_1Vector.html" title="A fixed-size 1D array class.">Index</a> oldShape = <a class="code" href="classndarray_1_1ArrayBase.html#a1ebe6f2a3d8c811be62741a3cd4e1685" title="Return a Vector of the sizes of all dimensions.">getShape</a>();
<a name="l00136"></a>00136         <a class="code" href="structndarray_1_1Vector.html" title="A fixed-size 1D array class.">Index</a> oldStrides = <a class="code" href="classndarray_1_1ArrayBase.html#a3872135e33b2369b8258b1ef585d2f7b" title="Return a Vector of the strides of all dimensions.">getStrides</a>();
<a name="l00137"></a>00137         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n=0; n &lt; ND::value; ++n) {
<a name="l00138"></a>00138             newShape[n] = oldShape[order[n]];
<a name="l00139"></a>00139             newStrides[n] = oldStrides[order[n]];
<a name="l00140"></a>00140         }
<a name="l00141"></a>00141         <span class="keywordflow">return</span> <a class="code" href="classndarray_1_1ArrayBase.html#a508428ff9e64c6a337a51bb0cd95a911" title="ArrayRef to a noncontiguous array; the result of a call to transpose(...).">Transpose</a>(
<a name="l00142"></a>00142             <a class="code" href="classndarray_1_1ArrayBase.html#a34aafeb459a41134090d144ce849e6c9" title="Return a raw pointer to the first element of the array.">getData</a>(), 
<a name="l00143"></a>00143             Core::create(newShape, newStrides, <a class="code" href="classndarray_1_1ArrayBase.html#a6a2355cfab8bc2a29cd11e64c87b5952" title="Return the opaque object responsible for memory management.">getManager</a>())
<a name="l00144"></a>00144         );
<a name="l00145"></a>00145     }
<a name="l00146"></a>00146 
<a name="l00148"></a><a class="code" href="classndarray_1_1ArrayBase.html#a720b4b425a6566f03ac6babcc1361750">00148</a>     <a class="code" href="classndarray_1_1Array.html" title="A multidimensional strided array.">Shallow</a> <span class="keyword">const</span> <a class="code" href="classndarray_1_1ArrayBase.html#a720b4b425a6566f03ac6babcc1361750" title="Return a Array view to this.">shallow</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classndarray_1_1ArrayBase.html#a4e68dabb08ef979ee44b99e7ccaf3e4b" title="The corresponding Array type.">Shallow</a>(this-&gt;getSelf()); }
<a name="l00149"></a>00149 
<a name="l00151"></a><a class="code" href="classndarray_1_1ArrayBase.html#a1a7a0fee1b61c1f4bb419955713f0693">00151</a>     <a class="code" href="classndarray_1_1ArrayRef.html" title="A proxy class for Array with deep assignment operators.">Deep</a> <span class="keyword">const</span> <a class="code" href="classndarray_1_1ArrayBase.html#a1a7a0fee1b61c1f4bb419955713f0693" title="Return an ArrayRef view to this.">deep</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classndarray_1_1ArrayBase.html#ab24c049ab9b985ce06cef463ef92b5d8" title="The corresponding ArrayRef type.">Deep</a>(this-&gt;getSelf()); }
<a name="l00152"></a>00152 
<a name="l00154"></a>00154     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> View_&gt;
<a name="l00155"></a><a class="code" href="structndarray_1_1ArrayBase_1_1ResultOf.html">00155</a>     <span class="keyword">struct </span><a class="code" href="structndarray_1_1ArrayBase_1_1ResultOf.html" title="A template metafunction class to determine the result of a view indexing operation...">ResultOf</a> {
<a name="l00156"></a>00156         <span class="keyword">typedef</span> <a class="code" href="classndarray_1_1ArrayBase.html#a88ae5e081c4f90245b0cd043bf25e88b" title="Data type of array elements.">Element</a> Element_;
<a name="l00157"></a>00157         <span class="keyword">typedef</span> <span class="keyword">typename</span> detail::ViewTraits&lt;ND::value, RMC::value, typename View_::Sequence&gt;::ND ND_;
<a name="l00158"></a>00158         <span class="keyword">typedef</span> <span class="keyword">typename</span> detail::ViewTraits&lt;ND::value, RMC::value, typename View_::Sequence&gt;::RMC RMC_;
<a name="l00159"></a>00159         <span class="keyword">typedef</span> <a class="code" href="classndarray_1_1ArrayRef.html" title="A proxy class for Array with deep assignment operators.">ArrayRef&lt;Element_,ND_::value,RMC_::value&gt;</a> <a class="code" href="classndarray_1_1ArrayRef.html" title="A proxy class for Array with deep assignment operators.">Type</a>;
<a name="l00160"></a>00160         <span class="keyword">typedef</span> <a class="code" href="classndarray_1_1Array.html" title="A multidimensional strided array.">Array&lt;Element_,ND_::value,RMC_::value&gt;</a> <a class="code" href="classndarray_1_1Array.html" title="A multidimensional strided array.">Value</a>;
<a name="l00161"></a>00161     };
<a name="l00162"></a>00162 
<a name="l00164"></a>00164     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Seq&gt;
<a name="l00165"></a>00165     <span class="keyword">typename</span> <a class="code" href="structndarray_1_1ArrayBase_1_1ResultOf.html" title="A template metafunction class to determine the result of a view indexing operation...">ResultOf&lt; View&lt;Seq&gt;</a> &gt;::Type
<a name="l00166"></a><a class="code" href="classndarray_1_1ArrayBase.html#a1a9ab973a252d87b92af6ecfd168bdb5">00166</a>     <a class="code" href="classndarray_1_1ArrayBase.html#a1a9ab973a252d87b92af6ecfd168bdb5" title="Return a general view into this array (see Tutorial).">operator[]</a>(<a class="code" href="structndarray_1_1View.html" title="A template meta-sequence that defines an arbitrary view into an unspecified array...">View&lt;Seq&gt;</a> <span class="keyword">const</span> &amp; def)<span class="keyword"> const </span>{
<a name="l00167"></a>00167         <span class="keywordflow">return</span> detail::buildView(this-&gt;getSelf(), def.<a class="code" href="structndarray_1_1View.html#a8528e5338867a55e57d31cb8f7c5d698" title="A boost::fusion sequence of index objects.">_seq</a>);
<a name="l00168"></a>00168     }
<a name="l00169"></a>00169 
<a name="l00170"></a>00170 <span class="keyword">protected</span>:
<a name="l00171"></a>00171     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T_, <span class="keywordtype">int</span> N_, <span class="keywordtype">int</span> C_&gt; <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classndarray_1_1Array.html" title="A multidimensional strided array.">Array</a>;
<a name="l00172"></a>00172     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T_, <span class="keywordtype">int</span> N_, <span class="keywordtype">int</span> C_&gt; <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classndarray_1_1ArrayRef.html" title="A proxy class for Array with deep assignment operators.">ArrayRef</a>;
<a name="l00173"></a>00173     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T_, <span class="keywordtype">int</span> N_, <span class="keywordtype">int</span> C_&gt; <span class="keyword">friend</span> <span class="keyword">struct </span><a class="code" href="structndarray_1_1ArrayTraits.html" title="Dimension-specialized traits shared by Array and ArrayRef.">ArrayTraits</a>;
<a name="l00174"></a>00174     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T_, <span class="keywordtype">int</span> N_, <span class="keywordtype">int</span> C_&gt; <span class="keyword">friend</span> <span class="keyword">class </span>detail::NestedIterator;
<a name="l00175"></a>00175     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Derived_&gt; <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classndarray_1_1ArrayBase.html" title="CRTP implementation for Array and ArrayRef.">ArrayBase</a>;
<a name="l00176"></a>00176     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Array_&gt; <span class="keyword">friend</span> <span class="keyword">struct </span>detail::ArrayAccess;
<a name="l00177"></a>00177 
<a name="l00178"></a>00178     <a class="code" href="classndarray_1_1ArrayBase.html#a88ae5e081c4f90245b0cd043bf25e88b" title="Data type of array elements.">Element</a> * _data;
<a name="l00179"></a>00179     CorePtr _core;
<a name="l00180"></a>00180 
<a name="l00181"></a>00181     <span class="keywordtype">void</span> operator=(<a class="code" href="classndarray_1_1ArrayBase.html" title="CRTP implementation for Array and ArrayRef.">ArrayBase</a> <span class="keyword">const</span> &amp; other) {
<a name="l00182"></a>00182         _data = other._data;
<a name="l00183"></a>00183         _core = other._core;
<a name="l00184"></a>00184     }
<a name="l00185"></a>00185 
<a name="l00186"></a>00186     ArrayBase(<a class="code" href="classndarray_1_1ArrayBase.html#a88ae5e081c4f90245b0cd043bf25e88b" title="Data type of array elements.">Element</a> * data, CorePtr <span class="keyword">const</span> &amp; core) : _data(data), _core(core) {}
<a name="l00187"></a>00187 };
<a name="l00188"></a>00188 
<a name="l00189"></a>00189 } <span class="comment">// namespace ndarray</span>
<a name="l00190"></a>00190 
<a name="l00191"></a>00191 <span class="preprocessor">#endif // !NDARRAY_ArrayBase_hpp_INCLUDED</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Aug 25 17:30:13 2011 for ndarray by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
